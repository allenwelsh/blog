# 正则表达式

### 一、修饰符

- i:将匹配设置为不区分大小写，搜索时不区分大小写: A 和 a 没有区别。

- g:查找所有的匹配项。

- m:使边界字符 ^ 和 $ 匹配每一行的开头和结尾，记住是多行，而不是整个字符串的开头和结尾。

### 二、元字符

##### 定位符

- ^：匹配输入字符串开始的位置；
- $：匹配输入字符串结尾的位置；
- \b：匹配一个单词边界，即字与空格间的位置；
- \B：非单词边界匹配；

##### 限定符

限定符用来指定正则表达式的一个给定组件必须要出现多少次才能满足匹配。有 \* 或 + 或 ? 或 {n} 或 {n,} 或 {n,m} 共 6 种。

- \*：匹配前面的子表达式零次或多次。例如，zo\_ 能匹配 "z" 以及 "zoo"。\* 等价于{0,}；
- +：匹配前面的子表达式一次或多次。例如，'zo+' 能匹配 "zo" 以及 "zoo"，但不能匹配 "z"。+ 等价于 {1,}；
- ?：匹配前面的子表达式零次或一次。例如，"do(es)?" 可以匹配 "do" 、 "does" 中的 "does" 、 "doxy" 中的 "do" 。? 等价于 {0,1}；

- {n}：n 是一个非负整数。匹配确定的 n 次。例如，'o{2}' 不能匹配 "Bob" 中的 'o'，但是能匹配 "food" 中的两个 o；
- {n,}：n 是一个非负整数。至少匹配 n 次。例如，'o{2,}' 不能匹配 "Bob" 中的 'o'，但能匹配 "foooood" 中的所有 o。'o{1,}' 等价于 'o+'。'o{0,}' 则等价于 'o\*'；
- {n,m}：m 和 n 均为非负整数，其中 n <= m。最少匹配 n 次且最多匹配 m 次。例如，"o{1,3}" 将匹配 "fooooood" 中的前三个 o。'o{0,1}' 等价于 'o?'。请注意在逗号和两个数之间不能有空格。；

* 和 + 限定符都是贪婪的，因为它们会尽可能多的匹配文字，只有在它们的后面加上一个 ? 就可以实现非贪婪或最小匹配。

##### 选择

用圆括号 () 将所有选择项括起来，相邻的选择项之间用 | 分隔。

- x|y: 匹配 x 或 y。例如，'z|food' 能匹配 "z" 或 "food"。'(z|f)ood' 则匹配 "zood" 或 "food"

##### 集合和范围

字符集合，用[]表示，匹配所包含的任意一个字符，用 [-]表示范围，用[^]表示不属于此集合

##### 预定义类

- \d：匹配一个数字字符。等价于 [0-9]。
- \D：匹配一个非数字字符。等价于 [^0-9]。
- \w:匹配字母、数字、下划线。等价于'[A-Za-z0-9_]'。
- \W:匹配非字母、数字、下划线。等价于'[^a-za-z0-9_]'。
- \f:匹配一个换页符。等价于 \x0c 和 \cL。
- \n:匹配一个换行符。等价于 \x0a 和 \cJ。
- \s:匹配空白，包括空格、换行、tab 缩进等所有的空白。
- \S:匹配所有的字符，完全的。
- ()\n:其中 n 表示位置

```
([0-9])\1{5} 或 ([\d])\1{5} 连续相同的6位数字 如:333333
([0-9a-zA-Z])\1{5}   连续相同的6位数字或字母 如:222222 cccccc ZZZZZZ
([\d])\1{2}([a-z])\2{2} 连续相同3位数字后根连续相同的三位小写字母 如:222www
([\d])\1{2}([a-z])\2{2}|([a-z])\3{2}([\d])\4{2} 同上,但是能匹配数字+字母或字母+数字 如:222www 或 www222
这么多的例子自己可以扩展,要注意的就是 \1 \2代表位置,从左到右递增
```

##### 引用和反引用

() 表示捕获分组，() 会把每个分组里的匹配的值保存起来， 多个匹配值可以通过数字 n 来查看(n 是一个数字，表示第 n 个捕获组的内容)
但用圆括号会有一个副作用，使相关的匹配会被缓存
对一个正则表达式模式或部分模式两边添加圆括号将导致相关匹配存储到一个临时缓冲区中，所捕获的每个子匹配都按照在正则表达式模式中从左到右出现的顺序存储。缓冲区编号从 1 开始，最多可存储 99 个捕获的子表达式。每个缓冲区都可以使用 \n 访问，其中 n 为一个标识特定缓冲区的一位或两位十进制数。

```js
const reg = /(\d)([a-z]+)/g;
```

- exp1(?=exp2)：查找 exp2 前面的 exp1
- exp1(?!exp2)：查找后面不是 exp2 的 exp1。
- (?<=exp2)exp1：查找 exp2 后面的 exp1
- (?<!exp2)exp1：查找前面不是 exp2 的 exp1

##### 捕获和分组

- 正则表达式分组分为捕获组（Capturing Groups）与非捕获组 Non-Capturing Groups。正则里面是用成对的小括号来表示分组的，如(\d)表示一个分组，(\d)(\d)表示有两个分组，(\d)(\d)(\d)表示有三个分组，有几对小括号元字符组成，就表示有几个分组

- 分组的目的如下：
  - 作为可选分支
  - 简写重复模式
  - 缓存捕获数据及反向引用（只有捕获组才可以被反向引用）

### 三、运算符优先级

\（转义符）>圆括号和方括号((), (?:), (?=), [])>定位点和序列（^, $, \任何元字符、任何字符）>替换，"或"操作(|)

### 四、常用正则

##### 数字类

```
- 数字：/^\d$/ 或者 /^[0-9]$/
- n 位的数字：/^(\d){n}$/ 或者 /^[0-9]{n}$/
- 至少 n 位的数字：/^(\d){n,}$/ 或者 /^[0-9]{n,}$/
- m-n 位的数字：/^(\d){m,n}$/ 或者 /^[0-9]{m,n}$/
- 零和非零开头的数字：^(0|[1-9][0-9]\*)$
```

##### 校验字符

```
- 汉字：/^[\u4e00-\u9fa5]{0,}$/
- 英文和数字：/^[A-Za-z0-9]+$/
- 长度为3-20的所有字符：/^(\w){3,20}$/或者/^.{3,20}$/
- 由 26 个英文字母组成的字符串：/^[A-Za-z]+$/
- 由数字和 26 个英文字母组成的字符串：/^[A-Za-z0-9]+$/
- 由数字、26 个英文字母或者下划线组成的字符串：/^w+$/
- 中文、英文、数字包括下划线：/^[\u4e00-\u9fa5A-Za-z0-9_]+$/
- 中文、英文、数字但不包括下划线等符号：/^[\u4e00-\u9fa5A-Za-z0-9]+$/
```

##### 特殊需求表达式

```
- Email 地址：/^\w+@\w+\.([a-z])+$/
- 域名：/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?/
- 手机号码：/^1[2-9][0-9]{9}$/
- 身份证号(15 位、18 位数字)，最后一位是校验位，可能为数字或字符 X：(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)
- 帐号是否合法(字母开头，允许 5-16 字节，允许字母数字下划线)：/^[A-Za-z]\w{4,15}/
- 密码(以字母开头，长度在 6~18 之间，只能包含字母、数字和下划线)：/^[A-Za-z]\w{4,15}/
- 强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在 8-10 之间)：
- 强密码(必须包含大小写字母和数字的组合，可以使用特殊字符，长度在 8-10 之间)：
- 日期格式：
- 一年的 12 个月(01 ～ 09 和 1 ～ 12)：
- 中文字符的正则表达式：
```

### 五、工具

[regexper](https://regexper.com/)

[正则表达式在线测试](http://c.runoob.com/front-end/854)

[正则表达式练习](https://alf.nu/RegexGolf)

[捕获与分组](https://segmentfault.com/a/1190000021043947)
